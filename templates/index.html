{% extends "base_template.html" %}

{% block contenido %}

<link rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}">
<script type="text/javascript" src="{{ url_for('static', filename='js/cronometro.js') }}" defer></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/coordenadas.js') }}" defer></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/btnCronometro.js') }}" defer></script>


<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" defer></script>

<div class="container" id="welcome">
    <div>
        <div class="welcome">
            <h2>{{ current_user.nombre }}, Bienvenido al marcaje</h2>
            <h3>Aquí podrás registrar tus turnos (Entrada y Salida)</h3>
        </div>
        <div class="container-count card">
            <div class="sub-count-index card-body">
                <div class="count">
                    <div class="horas-text">
                        <h1 class="card-title">Turno Actual</h1>
                    </div>
                    <h2 class="name">Hola, {{ current_user.nombre }}</h2>
                    <div class="horas-count">
                        <form id="asistenciaForm" method="POST">
                            {{ form_a.hidden_tag() }}
                            <div class="contador-div">
                                <h1 id="contador">00:00:00</h1>
                            </div>
                            <div class="items-hora">
                                <div class="hora" id="hora">
                                    <h1><span>H</span></h1>
                                </div>
                                <div class="mins" id="min">
                                    <h1><span>M</span></h1>
                                </div>
                                <div class="seg" id="seg">
                                    <h1><span>S</span></h1>
                                </div>
                            </div>
                            <div class="mb-3">
                                {{ form_a.turno.label }}
                                {{ form_a.turno(class="form-control", id="turno") }}
                            </div>
                            <div class="mb-3">
                                {{ form_a.fecha_registro.label }}
                                {{ form_a.fecha_registro(class="form-control", type="date", id="fecha") }}
                            </div>
                            <div class="mb-3">
                                {{ form_a.hora_registro.label }}
                                <span id="reloj" class="form-control">{{ hora_actual }}</span>
                            </div>
                            <div class="mb-3">
                                {{ form_a.latitud(type="hidden", id="lat") }}
                                {{ form_a.longitud(type="hidden", id="lon") }}
                            </div>
                            <div class="botones card-body">
                                {{ form_a.submit(class="btn btn-success", id="ini_turno", disabled=disabled) }}
                                <Button type="reset" class="btn btn-danger" id="fin_turno" disabled>Finalizar Turno</Button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}